"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{"default":e}}var _classCallCheck2=require("babel-runtime/helpers/classCallCheck"),_classCallCheck3=_interopRequireDefault(_classCallCheck2),_createClass2=require("babel-runtime/helpers/createClass"),_createClass3=_interopRequireDefault(_createClass2),_possibleConstructorReturn2=require("babel-runtime/helpers/possibleConstructorReturn"),_possibleConstructorReturn3=_interopRequireDefault(_possibleConstructorReturn2),_inherits2=require("babel-runtime/helpers/inherits"),_inherits3=_interopRequireDefault(_inherits2),_react=require("react"),_react2=_interopRequireDefault(_react),_reactDom=require("react-dom"),_reactDom2=_interopRequireDefault(_reactDom),_propTypes=require("prop-types"),_propTypes2=_interopRequireDefault(_propTypes),Slider=function(e){function t(){var e,r,a,n;_classCallCheck3["default"](this,t);for(var l=arguments.length,i=Array(l),s=0;l>s;s++)i[s]=arguments[s];return r=a=_possibleConstructorReturn3["default"](this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),a.state={dragStart:0,dragStartTime:new Date,index:0,lastIndex:0,transition:!1},n=r,_possibleConstructorReturn3["default"](a,n)}return _inherits3["default"](t,e),_createClass3["default"](t,[{key:"componentWillMount",value:function(){var e=this.props.selected;this.setState({index:e,lastIndex:e})}},{key:"componentWillReceiveProps",value:function(e){var t=this.props.selected;t!==e.selected&&this.goToSlide(e.selected)}},{key:"handleDragStart",value:function(e,t){var r=this.getDragX(e,t);this.setState({dragStart:r,dragStartTime:new Date,transition:!1,slideWidth:_reactDom2["default"].findDOMNode(this.slider).offsetWidth})}},{key:"handleDragMove",value:function(e,t){var r=this.state,a=r.dragStart,n=r.lastIndex,l=r.slideWidth,i=this.getDragX(e,t),s=a-i,o=s/l,u=n+o,d=30;Math.abs(s)>d&&(e.stopPropagation(),e.preventDefault()),this.setState({index:u})}},{key:"handleDragEnd",value:function(){var e=this.props.children,t=this.state,r=t.dragStartTime,a=t.index,n=t.lastIndex,l=(new Date).getTime()-r.getTime(),i=n-a,s=Math.round(i/l*1e4),o=Math.round(a);Math.abs(s)>5&&(o=0>s?n+1:n-1),0>o?o=0:o>=e.length&&(o=e.length-1),this.setState({dragStart:0,index:o,lastIndex:o,transition:!0})}},{key:"goToSlide",value:function(e,t){var r=this.props,a=r.children,n=r.loop;t&&(t.preventDefault(),t.stopPropagation()),0>e?e=n?a.length-1:0:e>=a.length&&(e=n?0:a.length-1),this.setState({index:e,lastIndex:e,transition:!0})}},{key:"renderNav",value:function(){var e=this,t=this.props.children,r=this.state.lastIndex,a=t.map(function(t,a){var n=a===r?"Slider-navButton Slider-navButton--active":"Slider-navButton";return _react2["default"].createElement("button",{className:n,key:"slider-navigation--"+a,onClick:function(t){return e.goToSlide(a,t)}})});return _react2["default"].createElement("div",{className:"Slider-nav"},a)}},{key:"renderArrows",value:function(){var e=this,t=this.props,r=t.children,a=t.loop,n=t.showNav,l=this.state.lastIndex,i=n?"Slider-arrows":"Slider-arrows Slider-arrows--noNav";return _react2["default"].createElement("div",{className:i},a||l>0?_react2["default"].createElement("button",{className:"Slider-arrow Slider-arrow--left",onClick:function(t){return e.goToSlide(l-1,t)}}):null,a||l<r.length-1?_react2["default"].createElement("button",{className:"Slider-arrow Slider-arrow--right",onClick:function(t){return e.goToSlide(l+1,t)}}):null)}},{key:"render",value:function(){var e=this,t=this.props,r=t.children,a=t.showArrows,n=t.showNav,l=this.state,i=l.index,s=l.transition,o={width:100*r.length+"%",transform:"translateX("+-1*i*(100/r.length)+"%)"},u=s?"Slider-slides Slider-slides--transition":"Slider-slides";return _react2["default"].createElement("div",{className:"Slider",ref:function(t){e.slider=t}},a?this.renderArrows():null,n?this.renderNav():null,_react2["default"].createElement("div",{className:"Slider-inner",onTouchStart:function(t){return e.handleDragStart(t,!0)},onTouchMove:function(t){return e.handleDragMove(t,!0)},onTouchEnd:function(){return e.handleDragEnd(!0)}},_react2["default"].createElement("div",{className:u,style:o},r)))}}]),t}(_react.Component);Slider.displayName="Slider",Slider.defaultProps={loop:!1,selected:0,showArrows:!0,showNav:!0},Slider.propTypes={loop:_propTypes2["default"].bool,selected:_propTypes2["default"].number,showArrows:_propTypes2["default"].bool,showNav:_propTypes2["default"].bool},Slider.getDragX=function(e,t){return t?e.touches[0].pageX:e.pageX};